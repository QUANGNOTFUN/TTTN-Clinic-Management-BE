generator client {
  provider = "prisma-client-js"
  output   = "../generated/prisma"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

// Enum cho vai trò người dùng
enum Role {
  DOCTOR
  PATIENT
  MANAGER
}

// Bảng User (người dùng chung)
model Account {
  id         String   @id @default(uuid())
  email      String   @unique
  password   String
  role       Role
  created_at DateTime @default(now())
  updated_at DateTime @updatedAt

  Patient Patient?
}

// Bảng Patient (bệnh nhân)
model Patient {
  user_id           String    @unique @default(uuid())
  full_name         String?
  gender            String? // Giới tính (ví dụ: "male", "female", "other")
  date_of_birth     DateTime? // Ngày sinh
  medical_history   String? // Lịch sử y tế
  address           String? // Địa chỉ
  phone_number      String? // Số điện thoại
  blood_type        String? // Nhóm máu (ví dụ: "A+", "B-", "O+")
  emergency_contact String? // Liên hệ khẩn cấp
  insurance_number  String? // Số bảo hiểm y tế
  created_at        DateTime  @default(now())
  updated_at        DateTime  @updatedAt

  user Account @relation(fields: [user_id], references: [id])
}
